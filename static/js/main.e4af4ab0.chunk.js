(this.webpackJsonpweatherapp=this.webpackJsonpweatherapp||[]).push([[0],{57:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA5klEQVRIie3UP0oDQRSA8Z9/gmCTE9gHCz1GLO08hLWtRtCAR7DKOVKl0UY8QkDQSmwsBAvFWPjEWTEmuzxIkw+GnZ2deR+zb+axJIENnOMOD7hAK1NwgAk+4jnBWaagjT62sRuC+0xByU4Inn6N7+M6xm/jvcLIz/bnaf1ibWfKnL2mgh7WirVtDHAY/eOYdzXrdzSlFYJnWE8Ovomj6I/LD3VzMKu9owuryTt4w42vBA+TYy+YJjl4xKnqkU0V/HXpUplWNirUPUVl4fvmtWaMf6lduudKUMEYK9jCCy5xEsIlzfgEgjl1ChHFgaoAAAAASUVORK5CYII="},64:function(e,t,a){e.exports=a(96)},69:function(e,t,a){},70:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),s=a.n(c),i=(a(69),a(39)),l=(a(70),a(21)),o=a(53),u=a(54),m=a(62),d=a(59),h=a(40),f=a(22),y=a(15),p=a(60),E=a(41),g=a(34),w=a(25),v=a(58);function b(e){var t=e.selectCountry,a=w.countries.all.filter((function(e){return"assigned"===e.status})).map((function(e){return{code:e.alpha2,name:"".concat(e.emoji," ").concat(e.name)}}));return r.a.createElement(v.a,{id:"country-selector",labelKey:"name",onChange:t,options:a,placeholder:"Choose a country...",className:"mr-2"})}var A=a(61),C=a(26);function N(e){var t=e.mode,a=e.changeMode;return e.hidden?"":r.a.createElement(A.a,{type:"radio",name:"forecastMode",value:t,onChange:a},r.a.createElement(C.a,{value:"3hours"},"3 hours"),r.a.createElement(C.a,{value:"hourly"},"Hourly"))}function x(e){var t=e.loading,a=e.loaded,c=e.mode,s=e.searchCity,i=e.setCityName,l=e.setCountry,o=e.setMode,u=Object(n.useState)(""),m=Object(p.a)(u,2),d=m[0],h=m[1];return r.a.createElement(E.a,{inline:!0,onSubmit:function(e){e.preventDefault(),s()}},r.a.createElement(E.a.Control,{type:"search",placeholder:"City name",className:"mr-2",value:d,onChange:function(e){h(e.target.value),i(e.target.value)}}),r.a.createElement(b,{selectCountry:l}),r.a.createElement(g.a,{type:"submit",disabled:t||""===d,className:"mr-5",style:{width:"125px"}},t?"Searching...":"Search"),r.a.createElement("div",{className:"ml-auto"},r.a.createElement(N,{mode:c,changeMode:o,hidden:!a})))}x.defaultProps={loading:!1,loaded:!1};var j=a(1),O=a.n(j),k=a(13),I=a(28),R=a(18),S=a.n(R);function U(e){var t=e.icon,a=e.desc,n=e.center,c="https://openweathermap.org/img/wn/".concat(t,"@2x.png");return r.a.createElement("img",{src:c,alt:"weather icon",title:a,width:"100",height:"100",className:n?"d-block mx-auto":""})}U.defaultProps={center:!1};var M=a(57),T=a.n(M);function W(e){var t=e.weather,a=e.temp,n=e.humidity,c=e.wind,s="d-flex flex-column";return e.center&&(s+=" text-center"),e.marginTop&&(s+=" mt-3"),r.a.createElement("div",{className:s},r.a.createElement("small",null,t),r.a.createElement("div",{className:"flex-row"},r.a.createElement("span",null," ",a.toFixed(1),"C - \xa0"),r.a.createElement("span",{className:"text-info"}," ",n,"% ")),r.a.createElement("div",{className:"flex-row"},r.a.createElement("img",{src:T.a,alt:"wind",title:"wind",width:"16",height:"16",className:"mr-1"}),r.a.createElement("small",null,c," m/s")))}function Y(e){var t=e.weather,a=e.main,n=e.wind;if(0===t.length)return r.a.createElement("p",null,r.a.createElement("i",null,"Unable to fetch current weather"));var c=t.slice().pop();return r.a.createElement("div",{className:"d-flex flex-row"},r.a.createElement(U,{icon:c.icon,desc:c.description}),r.a.createElement(W,{weather:c.main,temp:a.temp,humidity:a.humidity,wind:n,marginTop:!0}))}W.defaultProps={center:!1,marginTop:!1};a(95);function L(e){var t,a=e.name,n=e.lat,c=e.lon,s=e.country,i=e.sunrise,l=e.sunset,o=e.weatherInfos,u=function(e){return S.a.unix(e).format("H:mm A")};return r.a.createElement(k.a,{className:"city-infos shadow-sm"},r.a.createElement(k.a.Body,{className:"pb-0"},r.a.createElement(k.a.Title,null,a),r.a.createElement(k.a.Subtitle,{className:"mb-2 text-muted"},"Lat: ",n,", Lon: ",c),r.a.createElement(Y,{weather:o.weather,main:o.main,wind:o.wind.speed})),r.a.createElement(I.a,{className:"list-group-flush infos"},r.a.createElement(I.a.Item,null,r.a.createElement("label",null,"Country")," ",(t=s,r.a.createElement(r.a.Fragment,null,w.countries[t].emoji," ",w.countries[t].name))),r.a.createElement(I.a.Item,null,r.a.createElement("label",null,"Sunrise")," ",u(i)),r.a.createElement(I.a.Item,null,r.a.createElement("label",null,"Sunset")," ",u(l),"\xa0")))}L.propTypeps={name:O.a.string.isRequired,lat:O.a.number.isRequired,lon:O.a.number.isRequired,country:O.a.string.isRequired,sunrise:O.a.number.isRequired,sunset:O.a.number.isRequired,weatherInfos:O.a.shape({weather:O.a.arrayOf(O.a.shape({icon:O.a.string,description:O.a.string,main:O.a.string})),main:O.a.shape({temp:O.a.number,humidity:O.a.number}).isRequired,wind:O.a.shape({speed:O.a.number.isRequired}).isRequired}).isRequired};var q=a(63),B=function(e){var t=e.weather,a=e.dt,n=Object(q.a)(e,["weather","dt"]);return r.a.createElement(k.a,{className:"py-3 mb-2 mr-2"},r.a.createElement("strong",{className:"mx-auto"}," ",S.a.unix(a).format("HH:mm A")," "),r.a.createElement(U,{icon:t.icon,desc:t.description,center:!0}),r.a.createElement(W,Object.assign({weather:t.main,center:!0},n)))};function H(e){var t=e.title,a=e.data.filter((function(e){return e.weather.length>0})).map((function(e){return r.a.createElement(y.a,{xs:"3",key:e.dt},r.a.createElement(B,{dt:e.dt,weather:e.weather.slice().pop(),temp:e.main.temp,humidity:e.main.humidity,wind:e.wind.speed}))}));return r.a.createElement(k.a,{className:"mb-3 shadow-sm"},r.a.createElement(k.a.Body,null,r.a.createElement(k.a.Title,null,t),r.a.createElement(f.a,{noGutters:!0}," ",a," ")))}function K(e){return function(e){return e.slice().reduce((function(e,t){var a=S.a.unix(t.dt),n=a.dayOfYear().toString();return e[n]||(e[n]={title:+n===S()().dayOfYear()?"Today":a.format("dddd"),data:[]}),e[n].data.push(t),e}),[])}(e.forecasts).flat().map((function(e){return r.a.createElement(f.a,{key:e.title},r.a.createElement(y.a,{xs:"12"},r.a.createElement(H,{title:e.title,data:e.data})))}))}var P=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(o.a)(this,a),(n=t.call(this,e)).state={city:null,forecasts:[],errors:[],loading:!1,search:{cityName:"",country:null,mode:"3hours"}};return n.API_URL="".concat("https://weather-app-node-server.herokuapp.com","/api/v1"),n}return Object(u.a)(a,[{key:"setCityName",value:function(e){this.setState({search:Object(l.a)(Object(l.a)({},this.state.search),{},{cityName:e})})}},{key:"setCountry",value:function(e){this.setState({search:Object(l.a)(Object(l.a)({},this.state.search),{},{country:e.length>0?e[0]:null})})}},{key:"setMode",value:function(e){var t=this;this.setState({search:Object(l.a)(Object(l.a)({},this.state.search),{},{mode:e})},(function(){t.searchCity()}))}},{key:"searchCity",value:function(){var e=this;this.setState({errors:[],loading:!0});var t=this.state.search.cityName,a=this.state.search.country;return a=a?",".concat(a.code):"",fetch("".concat(this.API_URL,"/weather?city=").concat(t).concat(a)).then((function(e){if(!e.ok)throw Error(e.status);return e.json()})).then((function(t){var a=e.state.search.mode;return e.setState({city:t}),"3hours"===a?e.fetchForecast(t.id):"hourly"===a?e.fetchHourly(t.coord.lat,t.coord.lon):void 0})).catch((function(a){var n=e.state.errors.slice();if("404"===a.message){var c=e.state.search.country,s=null!==c?" in ".concat(c.name):"";n.push({title:"Not found",body:r.a.createElement("p",null,"The city ",r.a.createElement("strong",null,t)," could not be found",s,". Wrong spelling, maybe ?")})}else console.log(a);e.setState({errors:n,city:null,forecasts:[],loading:!1})}))}},{key:"fetchForecast",value:function(e){var t=this;return fetch("".concat(this.API_URL,"/forecast?id=").concat(e)).then((function(e){return e.json()})).then((function(e){t.setState({forecasts:e.list,loading:!1})}))}},{key:"fetchHourly",value:function(e,t){var a=this;return fetch("".concat(this.API_URL,"/onecall?lat=").concat(e,"&lon=").concat(t)).then((function(e){return e.json()})).then((function(e){a.setState({forecasts:e.hourly.map((function(e){return{dt:e.dt,main:{temp:e.temp,humidity:e.humidity},weather:e.weather,wind:{speed:e.wind_speed}}})),loading:!1})}))}},{key:"renderErrors",value:function(){return this.state.errors.map((function(e){return r.a.createElement(h.a,{variant:"danger",dismissible:!0,key:e},r.a.createElement(h.a.Heading,null," ",e.title," "),e.body)}))}},{key:"renderCityInfos",value:function(){var e=this.state.city;if(!e)return"";var t={weather:e.weather,main:e.main,wind:e.wind};return r.a.createElement(L,{name:e.name,lat:e.coord.lat,lon:e.coord.lon,country:e.sys.country,sunrise:e.sys.sunrise,sunset:e.sys.sunset,weatherInfos:t})}},{key:"render",value:function(){var e=this.renderErrors(),t=this.renderCityInfos();return r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{loading:this.state.loading,loaded:this.state.forecasts.length>0,country:this.state.search.country,mode:this.state.search.mode,searchCity:this.searchCity.bind(this),setCityName:this.setCityName.bind(this),setCountry:this.setCountry.bind(this),setMode:this.setMode.bind(this)}),r.a.createElement("div",{className:"errors my-3"},e),r.a.createElement(f.a,{className:"mt-3"},r.a.createElement(y.a,{xs:"4"}," ",t," "),r.a.createElement(y.a,{xs:"8"},r.a.createElement(K,{forecasts:this.state.forecasts}))))}}]),a}(r.a.Component),z=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"header text-white shadow-lg py-3 w-100"},r.a.createElement(i.a,null,r.a.createElement("h1",null,"Weather App"),r.a.createElement("h5",null,"3 hours / hourly forecasts for a city"))),r.a.createElement(i.a,{className:"content bg-white mt-3 p-3 rounded"},r.a.createElement(P,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[64,1,2]]]);
//# sourceMappingURL=main.e4af4ab0.chunk.js.map